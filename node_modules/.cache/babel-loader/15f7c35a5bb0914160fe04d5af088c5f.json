{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jessi\\\\DeliBook\\\\delibook-client\\\\src\\\\components\\\\MealModal\\\\mealmodal.js\",\n  _s = $RefreshSig$();\nimport { React, useContext, useState } from 'react';\nimport { Button, Modal } from 'react-bootstrap';\nimport { MyContext } from '../../context';\nimport axios from 'axios';\nimport './mealmodal.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MealModal(_ref) {\n  _s();\n  var _user$favourites;\n  let {\n    title,\n    description,\n    idMeal\n  } = _ref;\n  const [show, setShow] = useState(false);\n  const {\n    user,\n    setUser\n  } = useContext(MyContext);\n  const [loading, setLoading] = useState(false);\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n  const handleAddToFavorites = async () => {\n    setLoading(true);\n    const response = await fetch('http://localhost:5000/add-favorites', {\n      method: 'POST',\n      headers: {\n        'x-access-token': localStorage.getItem('token')\n      },\n      mealId: idMeal\n    });\n    const data = await response.json();\n    setLoading(false);\n    console.log(user);\n    setUser(data);\n    alert('This meal has been added to favourites');\n  };\n  const handleRemoveFromFavorites = async () => {\n    setLoading(true);\n    const response = await fetch('http://localhost:5000/remove-favorites', {\n      method: 'POST',\n      headers: {\n        'x-access-token': localStorage.getItem('token')\n      },\n      body: JSON.stringify({\n        mealId: idMeal\n      })\n    });\n    const data = await response.json();\n    setLoading(false);\n    setUser(data);\n    alert('This meal has been added to favourites');\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      className: \"modal-button mb-3\",\n      variant: \"link\",\n      size: \"lg\",\n      onClick: handleShow,\n      children: \"View More\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: handleClose,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), user && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: (_user$favourites = user.favourites) !== null && _user$favourites !== void 0 && _user$favourites.includes(idMeal) ? /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            onClick: handleRemoveFromFavorites,\n            disabled: loading,\n            children: \"Remove from Favorites\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            className: \"modal-button\",\n            variant: \"primary\",\n            onClick: handleAddToFavorites,\n            disabled: loading,\n            children: \"Add to Favorites\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(MealModal, \"EjcPW1dyt4JtuTxohdfp5U9KpME=\");\n_c = MealModal;\nexport default MealModal;\nvar _c;\n$RefreshReg$(_c, \"MealModal\");","map":{"version":3,"names":["React","useContext","useState","Button","Modal","MyContext","axios","MealModal","title","description","idMeal","show","setShow","user","setUser","loading","setLoading","handleClose","handleShow","handleAddToFavorites","response","fetch","method","headers","localStorage","getItem","mealId","data","json","console","log","alert","handleRemoveFromFavorites","body","JSON","stringify","favourites","includes"],"sources":["C:/Users/jessi/DeliBook/delibook-client/src/components/MealModal/mealmodal.js"],"sourcesContent":["import {React, useContext, useState} from 'react';\r\nimport {Button, Modal} from 'react-bootstrap';\r\nimport { MyContext } from '../../context';\r\nimport axios from 'axios';\r\nimport './mealmodal.css';\r\n\r\nfunction MealModal({title, description, idMeal}) {\r\n  const [show, setShow] = useState(false);\r\n  const {user, setUser} = useContext(MyContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n  const handleAddToFavorites = async() => {\r\n    setLoading(true);\r\n    const response = await fetch('http://localhost:5000/add-favorites', {\r\n      method:'POST',\r\n      headers: {\r\n        'x-access-token': localStorage.getItem('token'),\r\n      },\r\n      \r\n        mealId: idMeal\r\n    }\r\n    )\r\n      const data = await response.json();\r\n      setLoading(false);\r\n      console.log(user)\r\n      setUser(data);\r\n      alert('This meal has been added to favourites');\r\n  };\r\n\r\n  const handleRemoveFromFavorites = async() => {\r\n    setLoading(true);\r\n    const response = await fetch('http://localhost:5000/remove-favorites', {\r\n      method:'POST',\r\n      headers: {\r\n        'x-access-token': localStorage.getItem('token'),\r\n      },\r\n      body: JSON.stringify({\r\n        mealId: idMeal\r\n    })\r\n    })\r\n    const data = await response.json();\r\n      setLoading(false);\r\n      setUser(data);\r\n      alert('This meal has been added to favourites');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button className='modal-button mb-3' variant=\"link\" size='lg' onClick={handleShow}>View More\r\n      </Button>\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>{description}</Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          {user && (\r\n            <>\r\n            {user.favourites?.includes(idMeal) ? (\r\n            <Button variant=\"danger\" onClick={handleRemoveFromFavorites} disabled={loading}>Remove from Favorites</Button>\r\n            ) : ( \r\n            <Button className='modal-button' variant=\"primary\" onClick={handleAddToFavorites} disabled={loading}>\r\n            Add to Favorites\r\n            </Button>\r\n            )}\r\n            </>\r\n          )}\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MealModal;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
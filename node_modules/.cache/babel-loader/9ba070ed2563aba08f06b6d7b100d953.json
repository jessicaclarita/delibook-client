{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jessi/DeliBook/delibook-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/jessi/DeliBook/delibook-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/jessi/DeliBook/delibook-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useContext,useState}from'react';import{Button,Modal}from'react-bootstrap';import{MyContext}from'../../context';import swal from'sweetalert';import'./mealmodal.css';// meal modal to show meal details whenever user click the \"view more\" button in meal cards\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function MealModal(_ref){var title=_ref.title,description=_ref.description,idMeal=_ref.idMeal;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useContext=useContext(MyContext),user=_useContext.user,setUser=_useContext.setUser;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};// to add meal to favorites\nvar handleAddToFavorites=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return fetch('http://localhost:5000/add-favorites',{method:'POST',headers:{'Content-Type':'application/json','x-access-token':localStorage.getItem('token')},body:JSON.stringify({mealId:idMeal})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setLoading(false);setUser(data);swal(\"Added to favorites successfully!\",{icon:\"success\",buttons:false,timer:2000});case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleAddToFavorites(){return _ref2.apply(this,arguments);};}();// to remove meal from favorites\nvar handleRemoveFromFavorites=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.next=3;return fetch('http://localhost:5000/remove-favorites',{method:'POST',headers:{'Content-Type':'application/json','x-access-token':localStorage.getItem('token')},body:JSON.stringify({mealId:idMeal})});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;setLoading(false);setUser(data);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function handleRemoveFromFavorites(){return _ref3.apply(this,arguments);};}();// to reconfirm if user wish to remove meal from favorites\nfunction confirmRemove(){swal({title:\"Are you sure?\",text:\"Once deleted, you will not be able to find this meal on favorites.\",icon:\"warning\",buttons:true,dangerMode:true,closeOnClickOutside:false,closeOnEsc:false}).then(function(willDelete){if(willDelete){handleRemoveFromFavorites();swal(\"Poof! Removed from favorites successfully!\",{icon:\"success\",buttons:false,timer:2000});}/* else {\r\n        swal(\"Your favorite meal is not removed\", {\r\n          icon: \"error\",\r\n          buttons: false,\r\n          timer: 2000,\r\n        });\r\n      } */});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{className:\"modal-button mb-3\",variant:\"link\",size:\"lg\",onClick:handleShow,children:\"View More\"}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsxs(Modal.Title,{children:[\"How to make \\\"\",title,\"\\\"\"]})}),/*#__PURE__*/_jsx(Modal.Body,{children:description}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"}),user&&/*#__PURE__*/ // if user is logged in\n_jsx(_Fragment,{children:user.favorites.includes(idMeal)?/*#__PURE__*/ // if user has favorite meals\n_jsx(Button,{variant:\"danger\",onClick:confirmRemove,disabled:loading,children:\"Remove from Favorites\"}):/*#__PURE__*/ // if user don't have any favorite meals\n_jsx(Button,{className:\"modal-button\",variant:\"link\",onClick:handleAddToFavorites,disabled:loading,children:\"Add to Favorites\"})})]})]})]});}export default MealModal;","map":{"version":3,"names":["React","useContext","useState","Button","Modal","MyContext","swal","MealModal","title","description","idMeal","show","setShow","user","setUser","loading","setLoading","handleClose","handleShow","handleAddToFavorites","fetch","method","headers","localStorage","getItem","body","JSON","stringify","mealId","response","json","data","icon","buttons","timer","handleRemoveFromFavorites","confirmRemove","text","dangerMode","closeOnClickOutside","closeOnEsc","then","willDelete","favorites","includes"],"sources":["C:/Users/jessi/DeliBook/delibook-client/src/components/MealModal/mealmodal.js"],"sourcesContent":["import {React, useContext, useState} from 'react';\r\nimport {Button, Modal} from 'react-bootstrap';\r\nimport { MyContext } from '../../context';\r\nimport swal from 'sweetalert';\r\nimport './mealmodal.css';\r\n\r\n// meal modal to show meal details whenever user click the \"view more\" button in meal cards\r\nfunction MealModal({title, description, idMeal}) {\r\n  const [show, setShow] = useState(false);\r\n  const {user, setUser} = useContext(MyContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  // to add meal to favorites\r\n  const handleAddToFavorites = async() => {\r\n    setLoading(true);\r\n    const response = await fetch('http://localhost:5000/add-favorites', {\r\n      method:'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'x-access-token': localStorage.getItem('token'),\r\n      },\r\n      body: JSON.stringify({\r\n        mealId: idMeal\r\n    })\r\n    })\r\n      const data = await response.json();\r\n      setLoading(false);\r\n      setUser(data);\r\n      swal(\"Added to favorites successfully!\", {\r\n        icon: \"success\",\r\n        buttons: false,\r\n        timer: 2000,\r\n      });\r\n  };\r\n\r\n  // to remove meal from favorites\r\n  const handleRemoveFromFavorites = async() => {\r\n    setLoading(true);\r\n    const response = await fetch('http://localhost:5000/remove-favorites', {\r\n      method:'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'x-access-token': localStorage.getItem('token'),\r\n      },\r\n      body: JSON.stringify({\r\n        mealId: idMeal\r\n    })\r\n    })\r\n    const data = await response.json();\r\n      setLoading(false);\r\n      setUser(data);\r\n  };\r\n\r\n  // to reconfirm if user wish to remove meal from favorites\r\n  function confirmRemove() {\r\n    swal({\r\n      title: \"Are you sure?\",\r\n      text: \"Once deleted, you will not be able to find this meal on favorites.\",\r\n      icon: \"warning\",\r\n      buttons: true,\r\n      dangerMode: true,\r\n      closeOnClickOutside: false,\r\n      closeOnEsc: false,\r\n    })\r\n    .then((willDelete) => {\r\n      if (willDelete) {\r\n        handleRemoveFromFavorites();\r\n        swal(\"Poof! Removed from favorites successfully!\", {\r\n          icon: \"success\",\r\n          buttons: false,\r\n          timer: 2000,\r\n        });\r\n      } \r\n      /* else {\r\n        swal(\"Your favorite meal is not removed\", {\r\n          icon: \"error\",\r\n          buttons: false,\r\n          timer: 2000,\r\n        });\r\n      } */\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button className='modal-button mb-3' variant=\"link\" size='lg' onClick={handleShow}>View More\r\n      </Button>\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>How to make \"{title}\"</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>{description}</Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          {user && ( // if user is logged in\r\n            <>\r\n            {user.favorites.includes(idMeal) ? ( // if user has favorite meals\r\n            <Button variant=\"danger\" onClick={confirmRemove} disabled={loading}>Remove from Favorites</Button>\r\n            ) : ( // if user don't have any favorite meals\r\n            <Button className='modal-button' variant=\"link\" onClick={handleAddToFavorites} disabled={loading}>\r\n            Add to Favorites\r\n            </Button>\r\n            )}\r\n            </>\r\n          )}\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MealModal;"],"mappings":"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"},"metadata":{},"sourceType":"module"}